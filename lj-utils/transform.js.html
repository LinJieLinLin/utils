<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>transform.js - lj-utils</title>
    
    <meta name="description" content="A clean, responsive documentation template theme for JSDoc 3." />
    
        <meta name="keywords" content="jsdoc, docdash,lj-utils" />
        <meta name="keyword" content="jsdoc, docdash,lj-utils" />
    
    
    
    <meta property="og:title" content="Docdash"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://cloud.githubusercontent.com/assets/447956/13398144/4dde7f36-defd-11e5-8909-1a9013302cb9.png"/>
    <meta property="og:site_name" content="Docdash"/>
    <meta property="og:url" content="http://clenemt.github.io/docdash/"/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/LinJieLinLin/utils" target="_blank" class="menu-item" id="Github" >Github repo</a></h2><h2><a href="https://gitee.com/uni-pro/utils" target="_blank" class="menu-item" id="Gitee" >Gitee repo</a></h2><h2><a href="../coverage/index.html" target="_blank" class="menu-item" id="coverage" >coverage</a></h2><h3>Classes</h3><ul><li><a href="CanvasClass.html">CanvasClass</a><ul class='methods'><li data-type='method'><a href="CanvasClass.html#createPoster">createPoster</a></li><li data-type='method'><a href="CanvasClass.html#draw">draw</a></li><li data-type='method'><a href="CanvasClass.html#drawImage">drawImage</a></li><li data-type='method'><a href="CanvasClass.html#fillText">fillText</a></li><li data-type='method'><a href="CanvasClass.html#getScale">getScale</a></li></ul></li><li><a href="Counter.html">Counter</a><ul class='methods'><li data-type='method'><a href="Counter.html#setCount">setCount</a></li><li data-type='method'><a href="Counter.html#setMaxCount">setMaxCount</a></li><li data-type='method'><a href="Counter.html#start">start</a></li><li data-type='method'><a href="Counter.html#stop">stop</a></li></ul></li><li><a href="Debounce.html">Debounce</a><ul class='methods'><li data-type='method'><a href="Debounce.html#debounce">debounce</a></li></ul></li><li><a href="Loading.html">Loading</a><ul class='methods'><li data-type='method'><a href="Loading.html#hide">hide</a></li><li data-type='method'><a href="Loading.html#loading">loading</a></li><li data-type='method'><a href="Loading.html#show">show</a></li></ul></li><li><a href="Throttle.html">Throttle</a><ul class='methods'><li data-type='method'><a href="Throttle.html#throttle">throttle</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-directive.html">directive</a></li><li></li><li><a href="module-encrypt_base64.html">encrypt/base64</a><ul class='methods'><li data-type='method'><a href="module-encrypt_base64.html#~deBase64">deBase64</a></li><li data-type='method'><a href="module-encrypt_base64.html#~decode">decode</a></li><li data-type='method'><a href="module-encrypt_base64.html#~enBase64">enBase64</a></li><li data-type='method'><a href="module-encrypt_base64.html#~encode">encode</a></li></ul></li><li><a href="module-encrypt_crypto.html">encrypt/crypto</a><ul class='methods'><li data-type='method'><a href="module-encrypt_crypto.html#~aesInit">aesInit</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~deAes">deAes</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~deBase64">deBase64</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~decode">decode</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~enAes">enAes</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~enBase64">enBase64</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~encode">encode</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~md5">md5</a></li></ul></li><li><a href="module-index.html">index</a><ul class='methods'><li data-type='method'><a href="module-index.html#~arrayToObj">arrayToObj</a></li><li data-type='method'><a href="module-index.html#~autoPlayAudio">autoPlayAudio</a></li><li data-type='method'><a href="module-index.html#~blobToBase64">blobToBase64</a></li><li data-type='method'><a href="module-index.html#~blobToFile">blobToFile</a></li><li data-type='method'><a href="module-index.html#~blobUrlToFile">blobUrlToFile</a></li><li data-type='method'><a href="module-index.html#~dataURLtoBlob">dataURLtoBlob</a></li><li data-type='method'><a href="module-index.html#~debounce">debounce</a></li><li data-type='method'><a href="module-index.html#~decodeHtml">decodeHtml</a></li><li data-type='method'><a href="module-index.html#~deepCopy">deepCopy</a></li><li data-type='method'><a href="module-index.html#~delCookie">delCookie</a></li><li data-type='method'><a href="module-index.html#~delay">delay</a></li><li data-type='method'><a href="module-index.html#~dlFile">dlFile</a></li><li data-type='method'><a href="module-index.html#~encodeHtml">encodeHtml</a></li><li data-type='method'><a href="module-index.html#~formatNumber">formatNumber</a></li><li data-type='method'><a href="module-index.html#~formatSize">formatSize</a></li><li data-type='method'><a href="module-index.html#~formatTime">formatTime</a></li><li data-type='method'><a href="module-index.html#~friendlyTime">friendlyTime</a></li><li data-type='method'><a href="module-index.html#~getCookie">getCookie</a></li><li data-type='method'><a href="module-index.html#~getCookieObj">getCookieObj</a></li><li data-type='method'><a href="module-index.html#~getDuration">getDuration</a></li><li data-type='method'><a href="module-index.html#~getEnv">getEnv</a></li><li data-type='method'><a href="module-index.html#~getInfo">getInfo</a></li><li data-type='method'><a href="module-index.html#~getNetworkStatus">getNetworkStatus</a></li><li data-type='method'><a href="module-index.html#~getObj">getObj</a></li><li data-type='method'><a href="module-index.html#~getRandomColor">getRandomColor</a></li><li data-type='method'><a href="module-index.html#~getRegexp">getRegexp</a></li><li data-type='method'><a href="module-index.html#~getStorage">getStorage</a></li><li data-type='method'><a href="module-index.html#~getUrlParam">getUrlParam</a></li><li data-type='method'><a href="module-index.html#~getUrlParamObj">getUrlParamObj</a></li><li data-type='method'><a href="module-index.html#~getUuid">getUuid</a></li><li data-type='method'><a href="module-index.html#~hideInfo">hideInfo</a></li><li data-type='method'><a href="module-index.html#~isBlob">isBlob</a></li><li data-type='method'><a href="module-index.html#~isFile">isFile</a></li><li data-type='method'><a href="module-index.html#~isIdCard">isIdCard</a></li><li data-type='method'><a href="module-index.html#~isJson">isJson</a></li><li data-type='method'><a href="module-index.html#~isPrime">isPrime</a></li><li data-type='method'><a href="module-index.html#~loadFile">loadFile</a></li><li data-type='method'><a href="module-index.html#~objToArray">objToArray</a></li><li data-type='method'><a href="module-index.html#~objToObj">objToObj</a></li><li data-type='method'><a href="module-index.html#~off">off</a></li><li data-type='method'><a href="module-index.html#~on">on</a></li><li data-type='method'><a href="module-index.html#~px2vw">px2vw</a></li><li data-type='method'><a href="module-index.html#~randomInt">randomInt</a></li><li data-type='method'><a href="module-index.html#~remInit">remInit</a></li><li data-type='method'><a href="module-index.html#~replaceUrlParam">replaceUrlParam</a></li><li data-type='method'><a href="module-index.html#~requestDeviceMotionPermission">requestDeviceMotionPermission</a></li><li data-type='method'><a href="module-index.html#~rmbPrice">rmbPrice</a></li><li data-type='method'><a href="module-index.html#~safe">safe</a></li><li data-type='method'><a href="module-index.html#~safeData">safeData</a></li><li data-type='method'><a href="module-index.html#~secondToTime">secondToTime</a></li><li data-type='method'><a href="module-index.html#~setCookie">setCookie</a></li><li data-type='method'><a href="module-index.html#~setEnv">setEnv</a></li><li data-type='method'><a href="module-index.html#~setLog">setLog</a></li><li data-type='method'><a href="module-index.html#~setObj">setObj</a></li><li data-type='method'><a href="module-index.html#~setStorage">setStorage</a></li><li data-type='method'><a href="module-index.html#~setTitle">setTitle</a></li><li data-type='method'><a href="module-index.html#~setUrlParams">setUrlParams</a></li><li data-type='method'><a href="module-index.html#~sleep">sleep</a></li><li data-type='method'><a href="module-index.html#~string10to62">string10to62</a></li><li data-type='method'><a href="module-index.html#~string62to10">string62to10</a></li><li data-type='method'><a href="module-index.html#~throttle">throttle</a></li><li data-type='method'><a href="module-index.html#~toFixed">toFixed</a></li><li data-type='method'><a href="module-index.html#~toHump">toHump</a></li><li data-type='method'><a href="module-index.html#~toLine">toLine</a></li></ul></li><li></li><li></li><li></li><li><a href="module-microApi.html">microApi</a><ul class='methods'><li data-type='method'><a href="module-microApi.html#~P">P</a></li><li data-type='method'><a href="module-microApi.html#~checkSetting">checkSetting</a></li><li data-type='method'><a href="module-microApi.html#~checkUpdate">checkUpdate</a></li><li data-type='method'><a href="module-microApi.html#~clearStorageSync">clearStorageSync</a></li><li data-type='method'><a href="module-microApi.html#~cloudApi">cloudApi</a></li><li data-type='method'><a href="module-microApi.html#~downloadImgs">downloadImgs</a></li><li data-type='method'><a href="module-microApi.html#~getCurrentPage">getCurrentPage</a></li><li data-type='method'><a href="module-microApi.html#~getCurrentPageUrl">getCurrentPageUrl</a></li><li data-type='method'><a href="module-microApi.html#~getDb">getDb</a></li><li data-type='method'><a href="module-microApi.html#~getDom">getDom</a></li><li data-type='method'><a href="module-microApi.html#~getLocation">getLocation</a></li><li data-type='method'><a href="module-microApi.html#~getRichText">getRichText</a></li><li data-type='method'><a href="module-microApi.html#~getStorage">getStorage</a></li><li data-type='method'><a href="module-microApi.html#~getStorageSync">getStorageSync</a></li><li data-type='method'><a href="module-microApi.html#~getSystemInfo">getSystemInfo</a></li><li data-type='method'><a href="module-microApi.html#~getUserInfo">getUserInfo</a></li><li data-type='method'><a href="module-microApi.html#~hideLoading">hideLoading</a></li><li data-type='method'><a href="module-microApi.html#~init">init</a></li><li data-type='method'><a href="module-microApi.html#~ljApiFn">ljApiFn</a></li><li data-type='method'><a href="module-microApi.html#~login">login</a></li><li data-type='method'><a href="module-microApi.html#~refresh">refresh</a></li><li data-type='method'><a href="module-microApi.html#~request">request</a></li><li data-type='method'><a href="module-microApi.html#~requestCloud">requestCloud</a></li><li data-type='method'><a href="module-microApi.html#~scrollTop">scrollTop</a></li><li data-type='method'><a href="module-microApi.html#~setRequest">setRequest</a></li><li data-type='method'><a href="module-microApi.html#~setStorage">setStorage</a></li><li data-type='method'><a href="module-microApi.html#~setTitle">setTitle</a></li><li data-type='method'><a href="module-microApi.html#~showLoading">showLoading</a></li><li data-type='method'><a href="module-microApi.html#~toPage">toPage</a></li><li data-type='method'><a href="module-microApi.html#~toast">toast</a></li><li data-type='method'><a href="module-microApi.html#~uploadImg">uploadImg</a></li><li data-type='method'><a href="module-microApi.html#~uploadImgs">uploadImgs</a></li><li data-type='method'><a href="module-microApi.html#~wxLog">wxLog</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#types">types</a></li><li><a href="global.html#vMutilClick">vMutilClick</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">transform.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { safeData, deepCopy } from './base.js';

/**
 * @module index
 * @author linjielinlin 993353454@qq.com
 * @date 2022-05-11 22:07:43
 * @description 类型转换相关处理
 */
/**
 * @function
 * @description 转义html标签
 * @param  {string} argHtml 需要转义的文本
 * @returns {string}
 * @example
 * // returns '&amp;lt;p&amp;gt;Hello, World!&amp;lt;/p&amp;gt;'
 * encodeHtml('&lt;p>Hello, World!&lt;/p>')
 */
const encodeHtml = (argHtml) => {
    if (!argHtml || argHtml.length === 0) {
        return '';
    }
    const htmlEntities = {
        '&amp;': '&amp;amp;',
        '&lt;': '&amp;lt;',
        '>': '&amp;gt;',
        "'": '&amp;apos;',
        '"': '&amp;quot;',
        ' ': '&amp;nbsp;',
        '\n': '&lt;br>',
    };
    return argHtml.replace(/[&amp;&lt;>"' \n]/g, function (char) {
        return htmlEntities[char];
    });
};
/**
 * @function decodeHtml
 * @description 反转义HTML标签。
 * @param {string} argHtml - 需要反转义的文本。
 * @returns {string} 反转义后的文本。
 * @example
 * // 返回 "&amp;lt;p&amp;gt;Hello, World!&amp;lt;/p&amp;gt;"
 * decodeHtml("&lt;p>Hello, World!&lt;/p>");
 */
const decodeHtml = (argHtml) => {
    const htmlEntities = {
        quot: '"',
        apos: "'",
        lt: '&lt;',
        gt: '>',
        nbsp: ' ',
        amp: '&amp;',
    };
    return argHtml.replace(/&amp;([^;]+);/g, (match, entity) => {
        return htmlEntities[entity] || match;
    });
};
/**
 * @function rmbPrice
 * @description 显示人民币价格。
 * @param {unknown} argData - 价格。
 * @param {number} argRate - 保留多少位小数，默认为-1。
 * @param {string} argUnit - 单位，默认为'￥'。
 * @param {string} argDef - 空数据默认值，默认为'--'。
 * @returns {string} 格式化后的价格字符串，例如：'￥100'。
 * @example
 * // 返回 '￥100.00'
 * rmbPrice(100, 2);
 */
const rmbPrice = (argData, argRate = -1, argUnit = '￥', argDef = '--') => {
    if (typeof argData === 'string' || typeof argData === 'number') {
        if (!argData &amp;&amp; argData !== 0) {
            return argDef;
        }
    }
    else {
        return argDef;
    }
    argData = Number(argData);
    if (argRate > -1) {
        argData = +toFixed(argData, argRate);
    }
    return argUnit + argData;
};
/**
 * @function formatTime
 * @description 日期格式化显示。
 * @param {string|number|Date} date - 时间对象或时间戳，默认为当前时间。
 * @param {string} fmt - 格式化字符串，默认为'YYYY-MM-DD HH:mm:ss'。E为星期数，EEE:星期一，q为季度，S为毫秒数。
 * @param {string} emptyTip - 当date为false时的默认值，默认为''。
 * @returns {string} 格式化后的日期字符串。
 * @example
 * // 返回 '2022-01-01 00:00:00'
 * formatTime(new Date(2022, 0, 1));
 */
const formatTime = (date = +new Date(), fmt = 'YYYY-MM-DD HH:mm:ss', emptyTip = '') => {
    if (!date &amp;&amp; date !== 0) {
        return emptyTip;
    }
    if (isNaN(+date)) {
        return emptyTip;
    }
    if (typeof date === 'number') {
        if (date.toString().length === 10) {
            date = date * 1000;
        }
    }
    date = new Date(+date);
    const fmtMap = {
        'M+': date.getMonth() + 1,
        'D+': date.getDate(),
        'h+': date.getHours() % 12 === 0 ? 12 : date.getHours() % 12,
        'H+': date.getHours(),
        'm+': date.getMinutes(),
        's+': date.getSeconds(),
        'q+': Math.floor((date.getMonth() + 3) / 3),
        S: date.getMilliseconds(),
    };
    const week = {
        0: '\u65e5',
        1: '\u4e00',
        2: '\u4e8c',
        3: '\u4e09',
        4: '\u56db',
        5: '\u4e94',
        6: '\u516d',
    };
    const temY = fmt.match(/(Y+)/);
    if (temY) {
        fmt = fmt.replace(temY[0], (date.getFullYear() + '').substring(4 - temY[0].length));
    }
    const temWeek = fmt.match(/(E+)/);
    if (temWeek) {
        const temWeekName = ['', '\u5468'];
        fmt = fmt.replace(temWeek[0], (temWeekName[temWeek[0].length] || '\u661f\u671f') +
            safeData(week, date.getDay().toString(), ''));
    }
    for (let k in fmtMap) {
        let temMatch = fmt.match(new RegExp('(' + k + ')'));
        if (temMatch) {
            fmt = fmt.replace(temMatch[0], temMatch[0].length === 1
                ? fmtMap[k].toString()
                : ('00' + fmtMap[k].toString()).substring(('' + fmtMap[k]).length));
        }
    }
    return fmt;
};
/**
 * @function friendlyTime
 * @description 日期格式化友好显示。例如：刚刚，x分钟前，...。超过一年的按 fmt来格式化。
 * @param {string|number|Date} date - 时间对象或时间戳，默认为当前时间。
 * @param {string} fmt - 格式化字符串，默认为'YYYY-MM-DD HH:mm:ss'。
 * @param {string} emptyTip - 当date为false时的默认值，默认为''。
 * @returns {string} 格式化后的友好日期字符串。
 * @example
 * // 返回 '刚刚'
 * friendlyTime(new Date());
 */
const friendlyTime = (date = +new Date(), fmt = 'YYYY-MM-DD HH:mm:ss', emptyTip = '') => {
    if (!date &amp;&amp; date !== 0) {
        return emptyTip;
    }
    if (isNaN(+date)) {
        return emptyTip;
    }
    if (typeof date === 'number' || typeof date === 'string') {
        if (date.toString().length === 10) {
            date = date.toString() + '000';
        }
    }
    date = new Date(+date);
    let diff = (new Date().getTime() - date.getTime()) / 1000;
    let dayDiff = Math.floor(diff / 86400);
    let isValidDate = Object.prototype.toString.call(date) === '[object Date]' &amp;&amp;
        !isNaN(date.getTime());
    if (!isValidDate) {
        console.warn('friendlyTime:', 'not a valid date');
        return emptyTip || '--';
    }
    if (isNaN(dayDiff) || dayDiff &lt; 0 || dayDiff >= 365) {
        return formatTime(date, fmt);
    }
    return ((dayDiff === 0 &amp;&amp;
        ((diff &lt; 60 &amp;&amp; '刚刚') ||
            (diff &lt; 120 &amp;&amp; '1分钟前') ||
            (diff &lt; 3600 &amp;&amp; Math.floor(diff / 60) + '分钟前') ||
            (diff &lt; 7200 &amp;&amp; '1小时前') ||
            (diff &lt; 86400 &amp;&amp; Math.floor(diff / 3600) + '小时前'))) ||
        (dayDiff === 1 &amp;&amp; '昨天') ||
        (dayDiff &lt; 7 &amp;&amp; dayDiff + '天前') ||
        (dayDiff &lt; 31 &amp;&amp; Math.ceil(dayDiff / 7) + '周前') ||
        (dayDiff &lt; 365 &amp;&amp; Math.ceil(dayDiff / 31) + '月前')).toString();
};
/**
 * @function px2vw
 * @description 将px单位转换为vw单位
 * @param {number} argPx - px单位的数值
 * @param {number} argWith - px对应的最大宽度，默认为375
 * @param {string} argUnit - 单位，'vw'或'%'，默认为'vw'
 * @param {number} argNum - 保留的小数位数，默认为6
 * @returns {string} 转换后的数值
 * @example
 * // returns '187.5vw'
 * px2vw(200, 375, 'vw', 6)
 */
const px2vw = (argPx, argWith = 375, argUnit = 'vw', argNum = 6) => {
    return +toFixed((100 / argWith) * argPx, argNum) + argUnit;
};
/**
 * @function secondToTime
 * @description 将秒数转换为倒计时格式
 * @param {number} argData - 秒数
 * @param {Object} argOption - 配置项
 * @param {string} argOption.s - 秒的单位，默认为'秒'
 * @param {string} argOption.m - 分的单位，默认为'分'
 * @param {string} argOption.h - 时的单位，默认为'时'
 * @param {string} argOption.d - 天的单位，默认为'天'
 * @param {string} argOption.M - 月的单位，默认为'月'
 * @param {string} argOption.y - 年的单位，默认为'年'
 * @param {string} argOption.minUtil - 最小显示的时间单位，小于该单位的舍去，默认为's'
 * @param {string} argOption.maxUnit - 最大的时间单位，默认为'y'，大于该单位的合入该单位 's,m,h,d,M,y 对应 秒 分 时 天 月 年'，例如: 'm' '13月'
 * @param {boolean} argOption.hideZero - 是否隐藏为0的时间单位，默认为false，例如 01h05s
 * @param {boolean} argOption.isAddZero - 是否小于10时，是否添加0，默认为true
 * @returns {string} 转换后的倒计时格式的字符串
 * @example
 * // returns '01h05s'
 * secondToTime(3905, {s: '秒', m: '分', h: '时', d: '天', M: '月', y: '年', minUtil: 's', maxUnit: 'y', hideZero: false, isAddZero: true})
 */
const secondToTime = (argData, argOption = {}) => {
    let res = [];
    const { s = '秒', m = '分', h = '时', d = '天', M = '月', y = '年', minUnit = 's', maxUnit = 'y', isAddZero = true, } = argOption;
    const listObj = {
        s: {
            size: 1,
            type: 's',
            unit: s,
            index: 0,
        },
        m: {
            size: 60,
            unit: m,
            type: 'm',
            index: 1,
        },
        h: {
            size: 60,
            unit: h,
            type: 'h',
            index: 2,
        },
        d: {
            size: 24,
            unit: d,
            type: 'd',
            index: 3,
        },
        M: {
            size: 30,
            unit: M,
            type: 'M',
            index: 4,
        },
        y: {
            size: 12,
            unit: y,
            type: 'y',
            index: 5,
        },
    };
    let list = [listObj.s, listObj.m, listObj.h, listObj.d, listObj.M, listObj.y];
    let temLen = list.length;
    let second = argData;
    let size = 1;
    let index = 0;
    for (let i = 0; i &lt; temLen; i++) {
        let lastSize = size;
        if (maxUnit === list[i].type) {
            let temTime = Math.floor(second / lastSize);
            if (isAddZero &amp;&amp; temTime &lt; 10) {
                temTime = '0' + temTime;
            }
            res.unshift(temTime);
            index = temLen - i - 1;
            break;
        }
        size = size * (list[i + 1]?.size || 0) || 1;
        let time = Math.floor((second % size) / lastSize);
        if (isAddZero &amp;&amp; time &lt; 10) {
            time = '0' + time;
        }
        res.unshift(time);
    }
    let timeText = '';
    let isZero = true;
    temLen = res.length;
    for (let i = 0; i &lt; temLen; i++) {
        const v = res[i];
        if (!+v &amp;&amp; (isZero || argOption.hideZero)) ;
        else {
            isZero = false;
            timeText += v + list[5 - (index + i)].unit;
            if (minUnit === list[5 - (index + i)].type) {
                break;
            }
        }
    }
    return timeText;
};
/**
 * @function formatSize
 * @description 将byte数据转换为容量单位
 * @param {number} argData - byte数据
 * @param {number} argNum - 保留的小数位数，默认为2
 * @param {number} argIndex - 起始单位偏移，例如: 0:b 1:k 2:m，默认为0
 * @param {number} argRate - 进制，默认为1024
 * @param {string[]} unit - 进制，默认为['B', 'K', 'M', 'G', 'T', 'P']
 * @returns {string} 计算结果
 * @example
 * // returns '1.95K'
 * formatSize(2000, 2, 0, 1024, ['B', 'K', 'M', 'G', 'T', 'P'])
 */
const formatSize = (argData, argNum = 2, argIndex = 0, argRate = 1024, unit = ['B', 'K', 'M', 'G', 'T', 'P']) => {
    let list = unit;
    if (!argData) {
        return '0' + list[argIndex];
    }
    let len = list.length;
    let nowIndex = len - 1;
    let temData = 0;
    for (let i = 0; i &lt; len; i++) {
        temData = argData / Math.pow(argRate, i);
        if (temData &lt; argRate) {
            nowIndex = argIndex + i;
            break;
        }
    }
    return +toFixed(temData, argNum) + list[nowIndex];
};
/**
 * @function formatNumber
 * @description 将数据转换为数量单位k/w
 * @param {number} argData - 数据
 * @param {number} argNum - 保留的小数位数，默认为2
 * @returns {string} 计算结果
 * @example
 * // returns '2k'
 * formatNumber(2000, 2)
 */
const formatNumber = (argData, argNum = 2) => {
    if (argData &lt; 1000) {
        return argData.toString();
    }
    else if (argData &lt; 10000) {
        return +toFixed(argData / 1000, argNum) + 'k';
    }
    else {
        return +toFixed(argData / 10000, argNum) + 'w';
    }
};
/**
 * 在数据中间添加星号。
 * @function
 * @description 数据中间加星号
 * @param {string|number} argData - 要处理的数据。
 * @param {number} argStart=3 - 前端显示多少位。
 * @param {number} argEnd=4 - 后面显示多少位。
 * @returns {string} - 返回处理好的数据。
 * @example
 * // 示例
 * const data = '1234567890';
 * const hiddenData = hideInfo(data, 3, 4);
 * console.log(hiddenData); // 输出: '123***7890'
 */
const hideInfo = (argData = '', argStart = 3, argEnd = 4) => {
    argData = String(argData);
    let temLen = argData.length;
    let temSL = argData.length - argEnd - argStart;
    let start = '';
    if (temSL > 0) {
        for (let i = 0; i &lt; temSL; i++) {
            start += '*';
        }
        argData =
            argData.substring(0, argStart) +
                start +
                argData.substring(temLen - argEnd, temLen);
    }
    return argData;
};
/**
 * @function
 * @description 将10进制数据转换为62进制，用于短网址转换。
 * @date 2020-03-01
 * @param {number|string} argData - 要处理的数据。
 * @returns {string} - 返回处理好的数据。
 * @example
 * // 示例
 * const data = 123456;
 * const convertedData = string10to62(data);
 * console.log(convertedData); // 输出: 'w7E'
 */
const string10to62 = (argData) => {
    let chars = '0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ'.split('');
    let radix = chars.length;
    let data = +argData;
    let arr = [];
    do {
        let mod = data % radix;
        data = (data - mod) / radix;
        arr.unshift(chars[mod]);
    } while (data);
    return arr.join('');
};
/**
 * @function
 * @description 将62进制数据转换为10进制，用于短网址转换。
 * @date 2020-03-01
 * @param {string} argData - 要处理的数据。
 * @returns {number} - 返回处理好的数据。
 * @example
 * // 示例
 * const data = 'w7E';
 * const convertedData = string62to10(data);
 * console.log(convertedData); // 输出: 123456
 */
const string62to10 = (argData) => {
    let chars = '0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ';
    let radix = chars.length;
    let len = argData.length;
    let i = 0;
    let resNum = 0;
    while (i &lt; len) {
        resNum +=
            Math.pow(radix, i++) * chars.indexOf(argData.charAt(len - i) || '0');
    }
    return resNum;
};
/**
 * @function
 * @description 对数据进行toFixed处理。
 * @date 2020-03-01
 * @param {string|number} argData - 要处理的数据。
 * @param {number} argNum - 要保留的位数，默认返回2位小数。
 * @param {string} argType - 返回类型，round:默认四舍五入,floor:向下取整,ceil:向上取整,abs:绝对值。
 * @returns {string} - 返回处理好的数据。
 * @example
 * // 示例
 * const data = 123.456;
 * const fixedData = toFixed(data, 2, 'round');
 * console.log(fixedData); // 输出: '123.46'
 */
const toFixed = (argData, argNum = 2, argType = 'round') => {
    if (isNaN(+argData)) {
        return '';
    }
    const data = Math[argType](+argData * Math.pow(10, argNum)) / Math.pow(10, argNum);
    return data.toFixed(argNum);
};
/**
 * @function
 * @description 将驼峰字符串转换为下划线字符串
 * @param {string} argData - 要转换的字符串。
 * @param {string} argUnit - 要转换的字符，默认为“_”。
 * @return {string} - 转换后的下划线字符串。
 * @example
 * // 示例
 * const data = 'camelCase';
 * const convertedData = toLine(data);
 * console.log(convertedData); // 输出: 'camel_case'
 */
const toLine = (argData, argUnit = '_') => {
    return argData.replace(/([A-Z])/g, argUnit + '$1').toLowerCase();
};
/**
 * @function
 * @description 将下划线字符串转换为驼峰字符串
 * @param {string} argData - 要转换的字符串。
 * @param {string} argUnit - 要转换的字符，默认为“_”。
 * @return {string} - 转换后的驼峰字符串。
 * @example
 * // 示例
 * const data = 'underscore_case';
 * const convertedData = toHump(data);
 * console.log(convertedData); // 输出: 'underscoreCase'
 */
const toHump = (argData, argUnit = '_') => {
    return argData.replace(new RegExp('\\' + argUnit + '(\\w)', 'g'), (_, letter) => {
        return letter.toUpperCase();
    });
};
/**
 * @function
 * @description 指定数组key,转换为对象
 * @param {any[]} list - 数组。
 * @param {string} key - 对象对应的键值。
 * @param {string|object} extraData - 为string时，返回对象的键值对,为object时，返回对象。
 * @return {Object} - 返回的对象。
 * @example
 * // 示例
 * const list = [{ id: 1, name: 'Alice' }, { id: 2, name: 'Bob' }];
 * const obj = arrayToObj(list, 'id');
 * console.log(obj); // 输出: { '1': { id: 1, name: 'Alice' }, '2': { id: 2, name: 'Bob' } }
 */
const arrayToObj = (list, key = '', extraData = '') => {
    let obj = {};
    list.forEach((item, k) => {
        if (extraData) {
            if (typeof extraData === 'string') {
                obj[item[key] || key + k] = item[extraData] || '';
            }
            else if (typeof extraData === 'object') {
                obj[item[key] || key + k] = Object.assign(item, deepCopy(extraData));
            }
        }
        else {
            obj[item[key] || key + k] = item;
        }
    });
    return obj;
};
/**
 * @function
 * @description 将对象转换为键值对数组。
 * @param {object} obj - 要转换的对象。
 * @param {string} [key='key'] - 每个键值对的键名称默认key。
 * @param {string} [value='value'] - 每个键值对的值名称默认value。
 * @param {boolean} [isReverse=false] - 如果为true，则键值对将被颠倒,默认为false。
 * @return {array} - 键值对数组。
 * @example
// Example usage
const obj = { a: 1, b: 2 };
const result = objToArray(obj, 'id', 'v', true);
console.log(result); // Output: [{ v: 'a', id: 1 }, { v: 'b', id: 2 }]
*/
const objToArray = (obj, key = 'key', value = 'value', isReverse = false) => {
    const result = [];
    for (const k in obj) {
        if (obj.hasOwnProperty(k)) {
            result.push({
                [key]: isReverse ? obj[k] : k,
                [value]: isReverse ? k : obj[k],
            });
        }
    }
    return result;
};
/**
 * @function
 * @description 从原始对象中复制属性，并将其赋值给新对象，生成一个新对象。
 * @param {Object} obj - 要复制属性的原始对象。
 * @param {Object} tmplObj - 要赋值属性的新对象模板。
 * @param {boolean} isAssign - 可选。确定是否将属性赋值给原始对象。
 * @return {Object} 复制了属性的新对象。
 * @example
 * // 示例
 * const obj = { a: 1, b: 2 };
 * const tmplObj = { a: 0, c: 0 };
 * const newObj = objToObj(obj, tmplObj);
 * console.log(newObj); // 输出: { a: 1, c: '' }
 */
const objToObj = (obj, tmplObj, isAssign = false) => {
    let newObj = deepCopy(tmplObj);
    for (const key in newObj) {
        const temKey = String(newObj[key] || key);
        if (typeof newObj[key] === 'object') {
            newObj[key] = objToObj(obj, newObj[key]);
        }
        else {
            newObj[key] = safeData(obj, temKey, '');
        }
    }
    if (isAssign) {
        newObj = Object.assign({}, obj, newObj);
    }
    return newObj;
};

export { arrayToObj, decodeHtml, encodeHtml, formatNumber, formatSize, formatTime, friendlyTime, hideInfo, objToArray, objToObj, px2vw, rmbPrice, secondToTime, string10to62, string62to10, toFixed, toHump, toLine };
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Tue Nov 05 2024 12:13:29 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



    <script src="scripts/baidu.js"></script>
    
    <script src="https://lj4.top/utils/lj-utils/index.umd.js"></script>
    
</body>
</html>
