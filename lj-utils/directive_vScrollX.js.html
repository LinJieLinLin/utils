<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>directive/vScrollX.js - lj-utils</title>
    
    <meta name="description" content="A clean, responsive documentation template theme for JSDoc 3." />
    
        <meta name="keywords" content="jsdoc, docdash,lj-utils" />
        <meta name="keyword" content="jsdoc, docdash,lj-utils" />
    
    
    
    <meta property="og:title" content="Docdash"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://cloud.githubusercontent.com/assets/447956/13398144/4dde7f36-defd-11e5-8909-1a9013302cb9.png"/>
    <meta property="og:site_name" content="Docdash"/>
    <meta property="og:url" content="http://clenemt.github.io/docdash/"/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/LinJieLinLin/utils" target="_blank" class="menu-item" id="Github" >Github repo</a></h2><h2><a href="https://gitee.com/uni-pro/utils" target="_blank" class="menu-item" id="Gitee" >Gitee repo</a></h2><h2><a href="../coverage/index.html" target="_blank" class="menu-item" id="coverage" >coverage</a></h2><h3>Classes</h3><ul><li><a href="CanvasClass.html">CanvasClass</a><ul class='methods'><li data-type='method'><a href="CanvasClass.html#createPoster">createPoster</a></li><li data-type='method'><a href="CanvasClass.html#draw">draw</a></li><li data-type='method'><a href="CanvasClass.html#drawImage">drawImage</a></li><li data-type='method'><a href="CanvasClass.html#fillText">fillText</a></li><li data-type='method'><a href="CanvasClass.html#getScale">getScale</a></li></ul></li><li><a href="Counter.html">Counter</a><ul class='methods'><li data-type='method'><a href="Counter.html#setCount">setCount</a></li><li data-type='method'><a href="Counter.html#setMaxCount">setMaxCount</a></li><li data-type='method'><a href="Counter.html#start">start</a></li><li data-type='method'><a href="Counter.html#stop">stop</a></li></ul></li><li><a href="Debounce.html">Debounce</a><ul class='methods'><li data-type='method'><a href="Debounce.html#debounce">debounce</a></li></ul></li><li><a href="Loading.html">Loading</a><ul class='methods'><li data-type='method'><a href="Loading.html#hide">hide</a></li><li data-type='method'><a href="Loading.html#loading">loading</a></li><li data-type='method'><a href="Loading.html#show">show</a></li></ul></li><li><a href="Throttle.html">Throttle</a><ul class='methods'><li data-type='method'><a href="Throttle.html#throttle">throttle</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-directive.html">directive</a></li><li></li><li><a href="module-encrypt_base64.html">encrypt/base64</a><ul class='methods'><li data-type='method'><a href="module-encrypt_base64.html#~deBase64">deBase64</a></li><li data-type='method'><a href="module-encrypt_base64.html#~decode">decode</a></li><li data-type='method'><a href="module-encrypt_base64.html#~enBase64">enBase64</a></li><li data-type='method'><a href="module-encrypt_base64.html#~encode">encode</a></li></ul></li><li><a href="module-encrypt_crypto.html">encrypt/crypto</a><ul class='methods'><li data-type='method'><a href="module-encrypt_crypto.html#~aesInit">aesInit</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~deAes">deAes</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~deBase64">deBase64</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~decode">decode</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~enAes">enAes</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~enBase64">enBase64</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~encode">encode</a></li><li data-type='method'><a href="module-encrypt_crypto.html#~md5">md5</a></li></ul></li><li><a href="module-index.html">index</a><ul class='methods'><li data-type='method'><a href="module-index.html#~arrayToObj">arrayToObj</a></li><li data-type='method'><a href="module-index.html#~autoPlayAudio">autoPlayAudio</a></li><li data-type='method'><a href="module-index.html#~blobToBase64">blobToBase64</a></li><li data-type='method'><a href="module-index.html#~blobToFile">blobToFile</a></li><li data-type='method'><a href="module-index.html#~blobUrlToFile">blobUrlToFile</a></li><li data-type='method'><a href="module-index.html#~dataURLtoBlob">dataURLtoBlob</a></li><li data-type='method'><a href="module-index.html#~debounce">debounce</a></li><li data-type='method'><a href="module-index.html#~decodeHtml">decodeHtml</a></li><li data-type='method'><a href="module-index.html#~deepCopy">deepCopy</a></li><li data-type='method'><a href="module-index.html#~delCookie">delCookie</a></li><li data-type='method'><a href="module-index.html#~delay">delay</a></li><li data-type='method'><a href="module-index.html#~dlFile">dlFile</a></li><li data-type='method'><a href="module-index.html#~encodeHtml">encodeHtml</a></li><li data-type='method'><a href="module-index.html#~formatNumber">formatNumber</a></li><li data-type='method'><a href="module-index.html#~formatSize">formatSize</a></li><li data-type='method'><a href="module-index.html#~formatTime">formatTime</a></li><li data-type='method'><a href="module-index.html#~friendlyTime">friendlyTime</a></li><li data-type='method'><a href="module-index.html#~getCookie">getCookie</a></li><li data-type='method'><a href="module-index.html#~getCookieObj">getCookieObj</a></li><li data-type='method'><a href="module-index.html#~getDuration">getDuration</a></li><li data-type='method'><a href="module-index.html#~getEnv">getEnv</a></li><li data-type='method'><a href="module-index.html#~getInfo">getInfo</a></li><li data-type='method'><a href="module-index.html#~getNetworkStatus">getNetworkStatus</a></li><li data-type='method'><a href="module-index.html#~getObj">getObj</a></li><li data-type='method'><a href="module-index.html#~getRandomColor">getRandomColor</a></li><li data-type='method'><a href="module-index.html#~getRegexp">getRegexp</a></li><li data-type='method'><a href="module-index.html#~getStorage">getStorage</a></li><li data-type='method'><a href="module-index.html#~getUrlParam">getUrlParam</a></li><li data-type='method'><a href="module-index.html#~getUrlParamObj">getUrlParamObj</a></li><li data-type='method'><a href="module-index.html#~getUuid">getUuid</a></li><li data-type='method'><a href="module-index.html#~hideInfo">hideInfo</a></li><li data-type='method'><a href="module-index.html#~isBlob">isBlob</a></li><li data-type='method'><a href="module-index.html#~isFile">isFile</a></li><li data-type='method'><a href="module-index.html#~isIdCard">isIdCard</a></li><li data-type='method'><a href="module-index.html#~isJson">isJson</a></li><li data-type='method'><a href="module-index.html#~isPrime">isPrime</a></li><li data-type='method'><a href="module-index.html#~loadFile">loadFile</a></li><li data-type='method'><a href="module-index.html#~objToArray">objToArray</a></li><li data-type='method'><a href="module-index.html#~objToObj">objToObj</a></li><li data-type='method'><a href="module-index.html#~off">off</a></li><li data-type='method'><a href="module-index.html#~on">on</a></li><li data-type='method'><a href="module-index.html#~px2vw">px2vw</a></li><li data-type='method'><a href="module-index.html#~randomInt">randomInt</a></li><li data-type='method'><a href="module-index.html#~remInit">remInit</a></li><li data-type='method'><a href="module-index.html#~replaceUrlParam">replaceUrlParam</a></li><li data-type='method'><a href="module-index.html#~requestDeviceMotionPermission">requestDeviceMotionPermission</a></li><li data-type='method'><a href="module-index.html#~rmbPrice">rmbPrice</a></li><li data-type='method'><a href="module-index.html#~safe">safe</a></li><li data-type='method'><a href="module-index.html#~safeData">safeData</a></li><li data-type='method'><a href="module-index.html#~secondToTime">secondToTime</a></li><li data-type='method'><a href="module-index.html#~setCookie">setCookie</a></li><li data-type='method'><a href="module-index.html#~setEnv">setEnv</a></li><li data-type='method'><a href="module-index.html#~setLog">setLog</a></li><li data-type='method'><a href="module-index.html#~setObj">setObj</a></li><li data-type='method'><a href="module-index.html#~setStorage">setStorage</a></li><li data-type='method'><a href="module-index.html#~setTitle">setTitle</a></li><li data-type='method'><a href="module-index.html#~setUrlParams">setUrlParams</a></li><li data-type='method'><a href="module-index.html#~sleep">sleep</a></li><li data-type='method'><a href="module-index.html#~string10to62">string10to62</a></li><li data-type='method'><a href="module-index.html#~string62to10">string62to10</a></li><li data-type='method'><a href="module-index.html#~throttle">throttle</a></li><li data-type='method'><a href="module-index.html#~toFixed">toFixed</a></li><li data-type='method'><a href="module-index.html#~toHump">toHump</a></li><li data-type='method'><a href="module-index.html#~toLine">toLine</a></li></ul></li><li></li><li></li><li></li><li><a href="module-microApi.html">microApi</a><ul class='methods'><li data-type='method'><a href="module-microApi.html#~P">P</a></li><li data-type='method'><a href="module-microApi.html#~checkSetting">checkSetting</a></li><li data-type='method'><a href="module-microApi.html#~checkUpdate">checkUpdate</a></li><li data-type='method'><a href="module-microApi.html#~clearStorageSync">clearStorageSync</a></li><li data-type='method'><a href="module-microApi.html#~cloudApi">cloudApi</a></li><li data-type='method'><a href="module-microApi.html#~downloadImgs">downloadImgs</a></li><li data-type='method'><a href="module-microApi.html#~getCurrentPage">getCurrentPage</a></li><li data-type='method'><a href="module-microApi.html#~getCurrentPageUrl">getCurrentPageUrl</a></li><li data-type='method'><a href="module-microApi.html#~getDb">getDb</a></li><li data-type='method'><a href="module-microApi.html#~getDom">getDom</a></li><li data-type='method'><a href="module-microApi.html#~getLocation">getLocation</a></li><li data-type='method'><a href="module-microApi.html#~getRichText">getRichText</a></li><li data-type='method'><a href="module-microApi.html#~getStorage">getStorage</a></li><li data-type='method'><a href="module-microApi.html#~getStorageSync">getStorageSync</a></li><li data-type='method'><a href="module-microApi.html#~getSystemInfo">getSystemInfo</a></li><li data-type='method'><a href="module-microApi.html#~getUserInfo">getUserInfo</a></li><li data-type='method'><a href="module-microApi.html#~hideLoading">hideLoading</a></li><li data-type='method'><a href="module-microApi.html#~init">init</a></li><li data-type='method'><a href="module-microApi.html#~ljApiFn">ljApiFn</a></li><li data-type='method'><a href="module-microApi.html#~login">login</a></li><li data-type='method'><a href="module-microApi.html#~refresh">refresh</a></li><li data-type='method'><a href="module-microApi.html#~request">request</a></li><li data-type='method'><a href="module-microApi.html#~requestCloud">requestCloud</a></li><li data-type='method'><a href="module-microApi.html#~scrollTop">scrollTop</a></li><li data-type='method'><a href="module-microApi.html#~setRequest">setRequest</a></li><li data-type='method'><a href="module-microApi.html#~setStorage">setStorage</a></li><li data-type='method'><a href="module-microApi.html#~setTitle">setTitle</a></li><li data-type='method'><a href="module-microApi.html#~showLoading">showLoading</a></li><li data-type='method'><a href="module-microApi.html#~toPage">toPage</a></li><li data-type='method'><a href="module-microApi.html#~toast">toast</a></li><li data-type='method'><a href="module-microApi.html#~uploadImg">uploadImg</a></li><li data-type='method'><a href="module-microApi.html#~uploadImgs">uploadImgs</a></li><li data-type='method'><a href="module-microApi.html#~wxLog">wxLog</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#types">types</a></li><li><a href="global.html#vMutilClick">vMutilClick</a></li></ul>
    
</nav>

<div id="main">
    
    <h1 class="page-title">directive/vScrollX.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { getObj, setObj, on, off, safeData } from '../base.js';

/**
 * @module directive
 * @author linjielinlin 993353454@qq.com
 * @date 2022-05-11 22:07:43
 */
let dragInfo = getObj('directiveScrollX');
if (!dragInfo || !dragInfo.position) {
    dragInfo = {
        count: 0,
        isDown: false,
        elementList: new WeakMap(),
        position: {
            x: 0,
            y: 0,
        },
    };
    setObj('directiveScrollX', dragInfo);
}
// x轴拖动回调 鼠标按下
const scrollMousedown = (event) => {
    dragInfo.isDown = true;
    dragInfo.position.x = event.pageX;
    dragInfo.position.y = event.pageY;
    event.target.style.userSelect = 'none';
};
// x轴拖动回调  鼠标释放
const scrollMouseup = () => {
    dragInfo.isDown = false;
    dragInfo.position.x = 0;
    dragInfo.position.y = 0;
};
// x轴拖动回调  鼠标移动
const scrollMousemove = (event, el) => {
    // console.log('move', dragInfo)
    const moveX = dragInfo.position.x - event.pageX;
    // let moveY = dragInfo.position.y - event.pageY
    dragInfo.position.x = event.pageX;
    // dragInfo.position.y = event.pageY
    if (dragInfo.isDown) {
        safeData(el, 'scrollLeft', el.scrollLeft + moveX, true);
    }
};
const mounted = function (el) {
    el.style.overflowX = 'auto';
    // window.e = el
    // 鼠标按下
    on(el, 'mousedown', scrollMousedown);
    // 鼠标释放
    if (globalThis.document) {
        on(globalThis.document, 'mouseup', scrollMouseup);
    }
    else {
        on(el, 'mouseup', scrollMouseup);
    }
    let mouseMove;
    mouseMove = (event) => {
        scrollMousemove(event, el);
    };
    dragInfo.elementList.set(el, mouseMove);
    on(el, 'mousemove', mouseMove);
    dragInfo.count++;
};
const beforeUnmount = function (el) {
    dragInfo.count--;
    if (globalThis.document) {
        if (dragInfo.count &lt; 1) {
            off(globalThis.document, 'mouseup', scrollMouseup);
        }
    }
    else {
        off(el, 'mouseup', scrollMouseup);
    }
    off(el, 'mousedown', scrollMousedown);
    off(el, 'mousemove', dragInfo.elementList.get(el));
    dragInfo.elementList.delete(el);
};
/**
 * @description pc滚动条鼠标左右拖拽，用于父节点
 * @example
 * // 注册1
 * import scrollX from 'lj-utils/directive/vScrollX';
 * directives: {
 *   scrollX,
 * },
 * // 注册2 for &lt;script setup>
 * import vScrollX from 'lj-utils/directive/vScrollX';
 *
 * &lt;view
 *     id="a"
 *     v-scroll-x
 *     style="height: 100px; width: 100vw; background: grey; overflow: auto"
 *   >
 *     &lt;div style="height: 100px; width: 200vw; background: grey">test text&lt;/div>
 *   &lt;/view>
 */
const vScrollX = {
    mounted,
    beforeUnmount,
    // for vue2
    bind: mounted,
    unbind: beforeUnmount,
};

export { vScrollX as default, vScrollX };
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 4.0.2</a> on Tue Nov 05 2024 12:45:07 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



    <script src="scripts/baidu.js"></script>
    
    <script src="https://lj4.top/utils/lj-utils/index.umd.js"></script>
    
</body>
</html>
