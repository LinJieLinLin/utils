<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>mixins/common.js - lj-utils</title>
    
    <meta name="description" content="A clean, responsive documentation template theme for JSDoc 3." />
    
        <meta name="keywords" content="jsdoc, docdash,lj-utils" />
        <meta name="keyword" content="jsdoc, docdash,lj-utils" />
    
    
    
    <meta property="og:title" content="Docdash"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://cloud.githubusercontent.com/assets/447956/13398144/4dde7f36-defd-11e5-8909-1a9013302cb9.png"/>
    <meta property="og:site_name" content="Docdash"/>
    <meta property="og:url" content="http://clenemt.github.io/docdash/"/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/LinJieLinLin/utils" target="_blank" class="menu-item" id="Github" >Github repo</a></h2><h2><a href="https://gitee.com/uni-pro/utils" target="_blank" class="menu-item" id="Gitee" >Gitee repo</a></h2><h3>Classes</h3><ul><li><a href="CanvasClass.html">CanvasClass</a><ul class='methods'><li data-type='method'><a href="CanvasClass.html#draw">draw</a></li><li data-type='method'><a href="CanvasClass.html#getScale">getScale</a></li></ul></li><li><a href="Counter.html">Counter</a><ul class='methods'><li data-type='method'><a href="Counter.html#setCount">setCount</a></li><li data-type='method'><a href="Counter.html#setMaxCount">setMaxCount</a></li><li data-type='method'><a href="Counter.html#start">start</a></li><li data-type='method'><a href="Counter.html#stop">stop</a></li></ul></li><li><a href="Debounce.html">Debounce</a><ul class='methods'><li data-type='method'><a href="Debounce.html#debounce">debounce</a></li></ul></li><li><a href="Loading.html">Loading</a><ul class='methods'><li data-type='method'><a href="Loading.html#loading">loading</a></li></ul></li><li><a href="Throttle.html">Throttle</a><ul class='methods'><li data-type='method'><a href="Throttle.html#throttle">throttle</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-encrypt_base64.html">encrypt/base64</a><ul class='methods'><li data-type='method'><a href="module-encrypt_base64.html#.deBase64">deBase64</a></li><li data-type='method'><a href="module-encrypt_base64.html#.decode">decode</a></li><li data-type='method'><a href="module-encrypt_base64.html#.enBase64">enBase64</a></li><li data-type='method'><a href="module-encrypt_base64.html#.encode">encode</a></li></ul></li><li><a href="module-encrypt_crypto.html">encrypt/crypto</a><ul class='methods'><li data-type='method'><a href="module-encrypt_crypto.html#.aesInit">aesInit</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.deAes">deAes</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.deBase64">deBase64</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.decode">decode</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.enAes">enAes</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.enBase64">enBase64</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.encode">encode</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.md5">md5</a></li></ul></li><li><a href="module-j.html">j</a><ul class='methods'><li data-type='method'><a href="module-j.html#.blobToBase64">blobToBase64</a></li><li data-type='method'><a href="module-j.html#.blobToFile">blobToFile</a></li><li data-type='method'><a href="module-j.html#.blobUrlToFile">blobUrlToFile</a></li><li data-type='method'><a href="module-j.html#.dataURLtoBlob">dataURLtoBlob</a></li><li data-type='method'><a href="module-j.html#.decodeHtml">decodeHtml</a></li><li data-type='method'><a href="module-j.html#.delCookie">delCookie</a></li><li data-type='method'><a href="module-j.html#.encodeHtml">encodeHtml</a></li><li data-type='method'><a href="module-j.html#.formatTime">formatTime</a></li><li data-type='method'><a href="module-j.html#.friendlyTime">friendlyTime</a></li><li data-type='method'><a href="module-j.html#.getCookie">getCookie</a></li><li data-type='method'><a href="module-j.html#.getNetworkStatus">getNetworkStatus</a></li><li data-type='method'><a href="module-j.html#.getRandomColor">getRandomColor</a></li><li data-type='method'><a href="module-j.html#.getRegexp">getRegexp</a></li><li data-type='method'><a href="module-j.html#.getSystemInfo">getSystemInfo</a></li><li data-type='method'><a href="module-j.html#.getUrlParam">getUrlParam</a></li><li data-type='method'><a href="module-j.html#.getUrlParamObj">getUrlParamObj</a></li><li data-type='method'><a href="module-j.html#.hideInfo">hideInfo</a></li><li data-type='method'><a href="module-j.html#.isIdCard">isIdCard</a></li><li data-type='method'><a href="module-j.html#.isJson">isJson</a></li><li data-type='method'><a href="module-j.html#.loadFile">loadFile</a></li><li data-type='method'><a href="module-j.html#.px2vw">px2vw</a></li><li data-type='method'><a href="module-j.html#.randomInt">randomInt</a></li><li data-type='method'><a href="module-j.html#.remInit">remInit</a></li><li data-type='method'><a href="module-j.html#.replaceUrlParam">replaceUrlParam</a></li><li data-type='method'><a href="module-j.html#.rmbPrice">rmbPrice</a></li><li data-type='method'><a href="module-j.html#.safeData">safeData</a></li><li data-type='method'><a href="module-j.html#.setCookie">setCookie</a></li><li data-type='method'><a href="module-j.html#.setTitle">setTitle</a></li><li data-type='method'><a href="module-j.html#.setUrlParams">setUrlParams</a></li><li data-type='method'><a href="module-j.html#.sleep">sleep</a></li><li data-type='method'><a href="module-j.html#.string10to62">string10to62</a></li><li data-type='method'><a href="module-j.html#.string62to10">string62to10</a></li><li data-type='method'><a href="module-j.html#.toFixed">toFixed</a></li><li data-type='method'><a href="module-j.html#.toHump">toHump</a></li><li data-type='method'><a href="module-j.html#.toLine">toLine</a></li><li data-type='method'><a href="module-j.html#.uuid">uuid</a></li></ul></li><li><a href="module-microApi.html">microApi</a><ul class='members'><li data-type='member'><a href="module-microApi.html#.interceptors">interceptors</a></li></ul><ul class='methods'><li data-type='method'><a href="module-microApi.html#.checkSetting">checkSetting</a></li><li data-type='method'><a href="module-microApi.html#.checkUpdate">checkUpdate</a></li><li data-type='method'><a href="module-microApi.html#.chooseImage">chooseImage</a></li><li data-type='method'><a href="module-microApi.html#.clearStorageSync">clearStorageSync</a></li><li data-type='method'><a href="module-microApi.html#.cloudApi">cloudApi</a></li><li data-type='method'><a href="module-microApi.html#.downloadImgs">downloadImgs</a></li><li data-type='method'><a href="module-microApi.html#.getCurrentPage">getCurrentPage</a></li><li data-type='method'><a href="module-microApi.html#.getCurrentPageUrl">getCurrentPageUrl</a></li><li data-type='method'><a href="module-microApi.html#.getDb">getDb</a></li><li data-type='method'><a href="module-microApi.html#.getLocation">getLocation</a></li><li data-type='method'><a href="module-microApi.html#.getRichText">getRichText</a></li><li data-type='method'><a href="module-microApi.html#.getStorage">getStorage</a></li><li data-type='method'><a href="module-microApi.html#.getStorageSync">getStorageSync</a></li><li data-type='method'><a href="module-microApi.html#.getStorageSyncForVuex">getStorageSyncForVuex</a></li><li data-type='method'><a href="module-microApi.html#.getSystemInfo">getSystemInfo</a></li><li data-type='method'><a href="module-microApi.html#.getUserInfo">getUserInfo</a></li><li data-type='method'><a href="module-microApi.html#.hideLoading">hideLoading</a></li><li data-type='method'><a href="module-microApi.html#.init">init</a></li><li data-type='method'><a href="module-microApi.html#.ljApiFn">ljApiFn</a></li><li data-type='method'><a href="module-microApi.html#.ljLog">ljLog</a></li><li data-type='method'><a href="module-microApi.html#.log">log</a></li><li data-type='method'><a href="module-microApi.html#.login">login</a></li><li data-type='method'><a href="module-microApi.html#.P">P</a></li><li data-type='method'><a href="module-microApi.html#.request">request</a></li><li data-type='method'><a href="module-microApi.html#.requestCloud">requestCloud</a></li><li data-type='method'><a href="module-microApi.html#.scrollTop">scrollTop</a></li><li data-type='method'><a href="module-microApi.html#.setRequest">setRequest</a></li><li data-type='method'><a href="module-microApi.html#.setStorage">setStorage</a></li><li data-type='method'><a href="module-microApi.html#.setTitle">setTitle</a></li><li data-type='method'><a href="module-microApi.html#.showLoading">showLoading</a></li><li data-type='method'><a href="module-microApi.html#.toast">toast</a></li><li data-type='method'><a href="module-microApi.html#.toPage">toPage</a></li><li data-type='method'><a href="module-microApi.html#.uploadImg">uploadImg</a></li><li data-type='method'><a href="module-microApi.html#.uploadImgs">uploadImgs</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">mixins/common.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import { mapState, mapMutations } from 'vuex'
const init = (argOptions) => {
  console.log('mixin init', argOptions)
}
const mixin = {
  data() {
    return {
      // 进入页面的参数
      Params: {},
      // 页面loading状态
      LoadSu: true,
      FontTheme: { color: '#fe3800' },
    }
  },
  onLoad(argData) {
    this.Params = argData || {}
    if (this.init) {
      this.init()
    }
  },
  onShow() {},
  components: {},
  computed: {
    ...mapState(['UserInfo', 'Reload']),
  },
  methods: {
    ...mapMutations(['SetReload']),
    // 检测是否需要重load
    CheckReload() {
      if (this.Reload) {
        console.log('reload init()')
        this.init()
        this.SetReload()
      }
    },
    /**
     * @description:
     * @param {type} argKey '要赋值的数据下标，相对于this',
     * @param {type} argValue 数据,
     * @return:
     */
    SetKv(argKey, argValue) {
      let temData = this.$f.safeData(this, argKey)
      if (temData || typeof temData !== 'undefined') {
        // 小程序赋值
        if (Array.isArray(argValue)) {
          this.$f.safeData(this, argKey, [], true)
        }
        this.$f.safeData(this, argKey, argValue, true)
      } else {
        console.error(
          this.$f.safeData(this, argKey) + '数据' + argKey + '不存在！'
        )
      }
    },
    /**
     * @description: mixin监听数据变动，调用指定函数（主要用于小程序）
     * @param {object} argData{ // key与fn只传其一
     * key: '要赋值的数据下标，相对于this',
     * fn: '要调用的函数名',
     * data: '数据'
     * }
     * @return: no
     */
    ComChange(argData) {
      // console.log(argData)
      if (argData.key) {
        this.SetKv(argData.key, argData.data)
      }
      if (typeof this[argData.fn] === 'function') {
        let [, ...args] = [...arguments]
        this[argData.fn](argData.data, ...args)
      } else if (argData.fn) {
        console.error('函数' + argData.fn + '不存在！')
      }
    },
    // 后退
    Back() {
      this.$f.toPage('back', '', this.$f.safeData(this.Params, 'back', ''))
    },
    /**
     * @description: 获取dom节点相关信息
     * @param {String} argId id/class
     * @param {String} getAll 是否获取全部 true时，返回数组
     * @param {String} argOptions 修改默认返回具体参考：https://uniapp.dcloud.io/api/ui/nodes-info?id=nodesreffields
     * @return: object/array
     */
    async GetDom(argId, getAll, argOptions) {
      let temOptions = {
        id: true,
        dataset: true,
        rect: true,
        size: true,
        scrollOffset: true,
        computedStyle: [],
        context: true,
      }
      // #ifdef APP-PLUS||MP-WEIXIN
      temOptions.properties = []
      // #endif
      if (argOptions) {
        Object.assign(temOptions, argOptions)
      }
      return new Promise((resolve) => {
        let nodesRef
        let temDom = uni.createSelectorQuery().in(this)
        nodesRef = temDom[getAll ? 'selectAll' : 'select'](argId)
        nodesRef
          .fields(temOptions, (res) => {
            if (getAll &amp;&amp; Array.isArray(res) &amp;&amp; res.length) {
              resolve(res)
            }
            if (!getAll &amp;&amp; res) {
              resolve(res)
            }
          })
          .exec()
      })
    },
  },
  // 分享相关
  onShareAppMessage(argData) {
    console.error('调用了分享', argData)
    // https://uniapp.dcloud.io/api/plugins/share?id=onshareappmessage
    return {
      title: this.$store.state.ShareTitle || '欢迎分享',
      // 页面 path ，必须是以 / 开头的完整路径。 QQ小程序不支持
      path: '/pages/index/index',
      imageUrl: '',
      // 百度小程序表现为：分享内容；支付宝小程序表现为：吱口令文案;百度小程序、支付宝小程序
      // content: '',
      // // 自定义分享描述支付宝小程序、字节跳动小程序
      // desc: '',
      // // 自定义分享二维码的背景图，建议大小750*950（网络图片路径）支付宝小程序
      // bgImgUrl: '',
      // // QQ小程序查询字符串，必须是 key1=val1&amp;key2=val2 的格式。从这条转发消息进入后，可通过 qq.getLaunchOptionSync() 或 qq.onShow() 获取启动参数中的 query。QQ小程序
      // query: '',
      // // 开发者后台设置的分享素材模板 id字节跳动小程序
      // templateId: '',
      // // 接口调用成功的回调函数支付宝小程序、百度小程序
      // success: () => {},
      // // 接口调用成功的回调函数支付宝小程序、百度小程序
      // fail: () => {},
      // // 接口调用成功的回调函数支付宝小程序、百度小程序
      // complete: () => {},
    }
  },
  onShareTimeline() {
    console.error('调用了朋友圈分享')
    return {
      title: this.$store.state.ShareTitle || '欢迎分享',
      query: 'type=timeline',
      // 自定义图片路径，可以是本地文件或者网络图片。支持 PNG 及 JPG，显示图片长宽比是 1:1。
      // imageUrl:'',
    }
  },
}
export default {
  init,
  mixin,
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.7</a> on Wed Aug 04 2021 07:33:03 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>
