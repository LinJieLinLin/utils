<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>data.js - lj-utils</title>
    
    <meta name="description" content="A clean, responsive documentation template theme for JSDoc 3." />
    
        <meta name="keywords" content="jsdoc, docdash,lj-utils" />
        <meta name="keyword" content="jsdoc, docdash,lj-utils" />
    
    
    
    <meta property="og:title" content="Docdash"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content="https://cloud.githubusercontent.com/assets/447956/13398144/4dde7f36-defd-11e5-8909-1a9013302cb9.png"/>
    <meta property="og:site_name" content="Docdash"/>
    <meta property="og:url" content="http://clenemt.github.io/docdash/"/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/LinJieLinLin/utils" target="_blank" class="menu-item" id="Github" >Github repo</a></h2><h2><a href="https://gitee.com/uni-pro/utils" target="_blank" class="menu-item" id="Gitee" >Gitee repo</a></h2><h2><a href="../coverage/index.html" target="_blank" class="menu-item" id="coverage" >coverage</a></h2><h3>Classes</h3><ul><li><a href="CanvasClass.html">CanvasClass</a><ul class='methods'><li data-type='method'><a href="CanvasClass.html#draw">draw</a></li><li data-type='method'><a href="CanvasClass.html#getScale">getScale</a></li></ul></li><li><a href="Counter.html">Counter</a><ul class='methods'><li data-type='method'><a href="Counter.html#setCount">setCount</a></li><li data-type='method'><a href="Counter.html#setMaxCount">setMaxCount</a></li><li data-type='method'><a href="Counter.html#start">start</a></li><li data-type='method'><a href="Counter.html#stop">stop</a></li></ul></li><li><a href="Debounce.html">Debounce</a><ul class='methods'><li data-type='method'><a href="Debounce.html#debounce">debounce</a></li></ul></li><li><a href="Loading.html">Loading</a><ul class='methods'><li data-type='method'><a href="Loading.html#loading">loading</a></li></ul></li><li><a href="Throttle.html">Throttle</a><ul class='methods'><li data-type='method'><a href="Throttle.html#throttle">throttle</a></li></ul></li></ul><h3>Modules</h3><ul><li><a href="module-encrypt_base64.html">encrypt/base64</a><ul class='methods'><li data-type='method'><a href="module-encrypt_base64.html#.deBase64">deBase64</a></li><li data-type='method'><a href="module-encrypt_base64.html#.decode">decode</a></li><li data-type='method'><a href="module-encrypt_base64.html#.enBase64">enBase64</a></li><li data-type='method'><a href="module-encrypt_base64.html#.encode">encode</a></li></ul></li><li><a href="module-encrypt_crypto.html">encrypt/crypto</a><ul class='methods'><li data-type='method'><a href="module-encrypt_crypto.html#.aesInit">aesInit</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.deAes">deAes</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.deBase64">deBase64</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.decode">decode</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.enAes">enAes</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.enBase64">enBase64</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.encode">encode</a></li><li data-type='method'><a href="module-encrypt_crypto.html#.md5">md5</a></li></ul></li><li><a href="module-index.html">index</a><ul class='methods'><li data-type='method'><a href="module-index.html#.blobToBase64">blobToBase64</a></li><li data-type='method'><a href="module-index.html#.blobToFile">blobToFile</a></li><li data-type='method'><a href="module-index.html#.blobUrlToFile">blobUrlToFile</a></li><li data-type='method'><a href="module-index.html#.dataURLtoBlob">dataURLtoBlob</a></li><li data-type='method'><a href="module-index.html#.decodeHtml">decodeHtml</a></li><li data-type='method'><a href="module-index.html#.delCookie">delCookie</a></li><li data-type='method'><a href="module-index.html#.dlFile">dlFile</a></li><li data-type='method'><a href="module-index.html#.encodeHtml">encodeHtml</a></li><li data-type='method'><a href="module-index.html#.formatNumber">formatNumber</a></li><li data-type='method'><a href="module-index.html#.formatSize">formatSize</a></li><li data-type='method'><a href="module-index.html#.formatTime">formatTime</a></li><li data-type='method'><a href="module-index.html#.friendlyTime">friendlyTime</a></li><li data-type='method'><a href="module-index.html#.getCookie">getCookie</a></li><li data-type='method'><a href="module-index.html#.getDuration">getDuration</a></li><li data-type='method'><a href="module-index.html#.getEnv">getEnv</a></li><li data-type='method'><a href="module-index.html#.getInfo">getInfo</a></li><li data-type='method'><a href="module-index.html#.getNetworkStatus">getNetworkStatus</a></li><li data-type='method'><a href="module-index.html#.getRandomColor">getRandomColor</a></li><li data-type='method'><a href="module-index.html#.getRegexp">getRegexp</a></li><li data-type='method'><a href="module-index.html#.getStorage">getStorage</a></li><li data-type='method'><a href="module-index.html#.getUrlParam">getUrlParam</a></li><li data-type='method'><a href="module-index.html#.getUrlParamObj">getUrlParamObj</a></li><li data-type='method'><a href="module-index.html#.getUuid">getUuid</a></li><li data-type='method'><a href="module-index.html#.hideInfo">hideInfo</a></li><li data-type='method'><a href="module-index.html#.isBlob">isBlob</a></li><li data-type='method'><a href="module-index.html#.isFile">isFile</a></li><li data-type='method'><a href="module-index.html#.isIdCard">isIdCard</a></li><li data-type='method'><a href="module-index.html#.isJson">isJson</a></li><li data-type='method'><a href="module-index.html#.isPrime">isPrime</a></li><li data-type='method'><a href="module-index.html#.loadFile">loadFile</a></li><li data-type='method'><a href="module-index.html#.px2vw">px2vw</a></li><li data-type='method'><a href="module-index.html#.randomInt">randomInt</a></li><li data-type='method'><a href="module-index.html#.remInit">remInit</a></li><li data-type='method'><a href="module-index.html#.replaceUrlParam">replaceUrlParam</a></li><li data-type='method'><a href="module-index.html#.rmbPrice">rmbPrice</a></li><li data-type='method'><a href="module-index.html#.safeData">safeData</a></li><li data-type='method'><a href="module-index.html#.secondToTime">secondToTime</a></li><li data-type='method'><a href="module-index.html#.setCookie">setCookie</a></li><li data-type='method'><a href="module-index.html#.setEnv">setEnv</a></li><li data-type='method'><a href="module-index.html#.setLog">setLog</a></li><li data-type='method'><a href="module-index.html#.setStorage">setStorage</a></li><li data-type='method'><a href="module-index.html#.setTitle">setTitle</a></li><li data-type='method'><a href="module-index.html#.setUrlParams">setUrlParams</a></li><li data-type='method'><a href="module-index.html#.sleep">sleep</a></li><li data-type='method'><a href="module-index.html#.string10to62">string10to62</a></li><li data-type='method'><a href="module-index.html#.string62to10">string62to10</a></li><li data-type='method'><a href="module-index.html#.toFixed">toFixed</a></li><li data-type='method'><a href="module-index.html#.toHump">toHump</a></li><li data-type='method'><a href="module-index.html#.toLine">toLine</a></li></ul></li><li></li><li></li><li></li><li></li><li><a href="module-microApi.html">microApi</a><ul class='methods'><li data-type='method'><a href="module-microApi.html#.checkSetting">checkSetting</a></li><li data-type='method'><a href="module-microApi.html#.checkUpdate">checkUpdate</a></li><li data-type='method'><a href="module-microApi.html#.clearStorageSync">clearStorageSync</a></li><li data-type='method'><a href="module-microApi.html#.cloudApi">cloudApi</a></li><li data-type='method'><a href="module-microApi.html#.downloadImgs">downloadImgs</a></li><li data-type='method'><a href="module-microApi.html#.getCurrentPage">getCurrentPage</a></li><li data-type='method'><a href="module-microApi.html#.getCurrentPageUrl">getCurrentPageUrl</a></li><li data-type='method'><a href="module-microApi.html#.getDb">getDb</a></li><li data-type='method'><a href="module-microApi.html#.getLocation">getLocation</a></li><li data-type='method'><a href="module-microApi.html#.getRichText">getRichText</a></li><li data-type='method'><a href="module-microApi.html#.getStorage">getStorage</a></li><li data-type='method'><a href="module-microApi.html#.getStorageSync">getStorageSync</a></li><li data-type='method'><a href="module-microApi.html#.getSystemInfo">getSystemInfo</a></li><li data-type='method'><a href="module-microApi.html#.getUserInfo">getUserInfo</a></li><li data-type='method'><a href="module-microApi.html#.hideLoading">hideLoading</a></li><li data-type='method'><a href="module-microApi.html#.init">init</a></li><li data-type='method'><a href="module-microApi.html#.ljApiFn">ljApiFn</a></li><li data-type='method'><a href="module-microApi.html#.ljLog">ljLog</a></li><li data-type='method'><a href="module-microApi.html#.login">login</a></li><li data-type='method'><a href="module-microApi.html#.P">P</a></li><li data-type='method'><a href="module-microApi.html#.refresh">refresh</a></li><li data-type='method'><a href="module-microApi.html#.request">request</a></li><li data-type='method'><a href="module-microApi.html#.requestCloud">requestCloud</a></li><li data-type='method'><a href="module-microApi.html#.scrollTop">scrollTop</a></li><li data-type='method'><a href="module-microApi.html#.setRequest">setRequest</a></li><li data-type='method'><a href="module-microApi.html#.setStorage">setStorage</a></li><li data-type='method'><a href="module-microApi.html#.setTitle">setTitle</a></li><li data-type='method'><a href="module-microApi.html#.showLoading">showLoading</a></li><li data-type='method'><a href="module-microApi.html#.toast">toast</a></li><li data-type='method'><a href="module-microApi.html#.toPage">toPage</a></li><li data-type='method'><a href="module-microApi.html#.uploadImg">uploadImg</a></li><li data-type='method'><a href="module-microApi.html#.uploadImgs">uploadImgs</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">data.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * 类字符串/参数处理
 * @module index
 * @author linj
 */
import { getStorage } from './base';
let ENV = {};
/**
 * @function
 * @description 数据安全访问
 * @param  {any} argData  [原始数据]
 * @param  {string} argCheck [要返回的数据，用'.'连接，数组用'.+数字表示']
 * @param  {any} argValue [如果数据有误，返回的值，选填]
 * @param  {boolean|0|1} argSetValueForce [是否强制赋值argValue]
 * @returns {any}
 */
export const safeData = (argData, argCheck, argValue, argSetValueForce) => {
    if (typeof argCheck !== 'string' &amp;&amp; typeof argCheck !== 'number') {
        console.error('argCheck请传入string当前为:' + argCheck);
        return '';
    }
    const temKey = argCheck.toString().split('.');
    const temLen = temKey.length;
    if (!argData) {
        return argValue;
    }
    if (temLen > 1) {
        for (let i = 0; i &lt; temLen - 1; i++) {
            if (typeof argData[temKey[i]] !== 'object') {
                if (argSetValueForce) {
                    // console.error('赋值失败：', argData, i)
                }
                return argValue;
            }
            argData = argData[temKey[i]] || {};
        }
    }
    if (argSetValueForce) {
        argData[temKey[temLen - 1]] = argValue;
    }
    if (typeof argValue === 'undefined') {
        return argData[temKey[temLen - 1]];
    }
    else {
        return argData[temKey[temLen - 1]] || argValue;
    }
};
/**
 * 描述
 * @function
 * @description toFixed处理
 * @date 2020-03-01
 * @param {string|number} argData 要处理的数据
 * @param {number} argNum 要保留位数,默认返回2位小数
 * @param {string} argType 返回类型，默认返回字符串
 * @returns {string|number} 返回处理好的数据
 */
export const toFixed = (argData, argNum = 2, argType = 'string') => {
    let data = Math.round(+argData * Math.pow(10, argNum)) / Math.pow(10, argNum);
    data = (+data || 0).toFixed(argNum);
    return argType === 'string' ? data : +data;
};
/**
 * @function
 * @description 驼峰转下划线
 * @param {string} argData 要转换数据
 * @param {string} argUnit 要转换的字符，默认“_”
 * @return {string}
 */
export const toLine = (argData, argUnit = '_') => {
    return argData.replace(/([A-Z])/g, argUnit + '$1').toLowerCase();
};
/**
 * @function
 * @description 下划线转驼峰
 * @param {string} argData 要转换数据
 * @param {string} argUnit 要转换的字符，默认“_”
 * @return {string}
 */
export const toHump = (argData, argUnit = '_') => {
    return argData.replace(new RegExp('\\' + argUnit + '(\\w)', 'g'), (_, letter) => {
        return letter.toUpperCase();
    });
};
/**
 * 描述
 * @function
 * @description 10进制转62进制,用于短网址转换
 * @date 2020-03-01
 * @param {number|string} argData 要处理的数据
 * @returns {string} 返回处理好的数据
 */
export const string10to62 = (argData) => {
    let chars = '0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ'.split('');
    let radix = chars.length;
    let data = +argData;
    let arr = [];
    do {
        let mod = data % radix;
        data = (data - mod) / radix;
        arr.unshift(chars[mod]);
    } while (data);
    return arr.join('');
};
/**
 * 描述
 * @function
 * @description 62进制转10进制,用于短网址转换
 * @date 2020-03-01
 * @param {string} argData 要处理的数据
 * @returns {number} 返回处理好的数据
 */
export const string62to10 = (argData) => {
    let chars = '0123456789abcdefghigklmnopqrstuvwxyzABCDEFGHIGKLMNOPQRSTUVWXYZ';
    let radix = chars.length;
    let len = argData.length;
    let i = 0;
    let resNum = 0;
    while (i &lt; len) {
        resNum +=
            Math.pow(radix, i++) * chars.indexOf(argData.charAt(len - i) || '0');
    }
    return resNum;
};
/**
 * @description obj转url参数
 * @function
 * @param {any} argParams 参数对象
 * @param {boolean?} noMark 默认带?,true时,不带
 * @returns {string}
 */
export const setUrlParams = (argParams, noMark) => {
    let re = '';
    if (!noMark) {
        re = '?';
    }
    let paramsList = Object.keys(argParams);
    let temLength = paramsList.length;
    if (!temLength) {
        return '';
    }
    paramsList.map((v, k) => {
        re += v + '=' + argParams[v];
        if (k &lt; temLength - 1) {
            re += '&amp;';
        }
    });
    return re;
};
/**
 * @description 获取url参数
 * @function
 * @param {string} argName 要获取的key
 * @param {string} argUrl url数据
 * @returns {string}
 */
export const getUrlParam = (argName, argUrl = globalThis.location.search || '') => {
    let result = argUrl.match(new RegExp('[?&amp;]' + argName + '=([^&amp;]+)', 'i'));
    if (!result) {
        return '';
    }
    return decodeURIComponent(result[1]);
};
/**
 * @description 获取所有url参数，eg: a=1&amp;b=2 to {a:1,b:2}
 * @function
 * @param {string} argData 要处理的数据
 * @returns {any}
 */
export const getUrlParamObj = (argData = globalThis.location.search || globalThis.location.hash) => {
    const res = {};
    try {
        argData = decodeURIComponent(argData);
        let temArr = argData.split('?');
        argData = temArr.pop() || '';
        argData.replace(/([^?=&amp;#]+)=([^?=&amp;#]+)/g, (_, key, value) => {
            res[key] = value;
            return '';
        });
        return res;
    }
    catch (e) {
        console.error('转换失败', e);
        return res;
    }
    // let temObj = new URLSearchParams(argData)
    // let resObj = {}
    // for (const [key, value] of temObj) {
    //   resObj[key] = value
    // }
    // return resObj
};
/**
 * @description 通过正则匹配修改当前页面的url中的参数
 * @function
 * @param  {string} name key
 * @param  {string | number| undefined | null} value 要替换的value
 * @param  {string} url 要替换的网址,默认location.href
 * @returns {string}
 */
export const replaceUrlParam = (name, value, url = globalThis.location.href || '') => {
    let reg = new RegExp('([?]|&amp;)(' + name + '=)([^&amp;#]*)([&amp;]?|$)', 'img');
    let r = url.match(reg);
    let search = url.split('?');
    let strValue = url;
    if (value === undefined || value === null) {
        if (r != null) {
            strValue = url.replace(reg, function () {
                if (!arguments[4] || !arguments[4].length) {
                    return '';
                }
                else if (arguments[1] === arguments[4]) {
                    return arguments[1];
                }
                return arguments[1] + arguments[4];
            });
            strValue = strValue.replace('?&amp;', '?');
        }
    }
    else if (r != null) {
        strValue = url.replace(reg, `$1$2${value}$4`);
    }
    else if (search.length > 1) {
        let sub = search[1].split('#');
        if (sub.length > 1) {
            if (sub[1].length) {
                strValue = `${search[0]}?${sub[0]}&amp;${name}=${value}#${sub[1]}`;
            }
            else {
                strValue = `${search[0]}?${sub[0]}&amp;${name}=${value}${sub[1]}`;
            }
        }
        else {
            strValue = `${search[0]}?${search[1]}&amp;${name}=${value}`;
        }
    }
    else {
        // 不存在?时,搜索hash
        let sub = url.split('#');
        if (sub.length > 1) {
            strValue = `${sub[0]}?${name}=${value}#${sub[1]}`;
        }
        else {
            strValue = `${url}?${name}=${value}`;
        }
    }
    return strValue;
};
/**
 * @function
 * @description 转义html标签
 * @param  {string} argHtml 需要转义的文本
 * @returns {string}
 */
export const encodeHtml = (argHtml) => {
    if (!argHtml || argHtml.length === 0) {
        return '';
    }
    argHtml = argHtml.replace(/&amp;/g, '&amp;amp;');
    argHtml = argHtml.replace(/&lt;/g, '&amp;lt;');
    argHtml = argHtml.replace(/>/g, '&amp;gt;');
    argHtml = argHtml.replace(/'/g, '&amp;#39;');
    argHtml = argHtml.replace(/"/g, '&amp;quot;');
    argHtml = argHtml.replace(/ /g, '&amp;nbsp;');
    argHtml = argHtml.replace(/\n/g, '&lt;br>');
    return argHtml;
};
/**
 * @function
 * @description 反转义html标签
 * @param  {string} argHtml 需要反转义的文本
 * @returns {string}
 */
export const decodeHtml = (argHtml) => {
    if (!argHtml || argHtml.length === 0) {
        return '';
    }
    argHtml = argHtml.replace(/&amp;amp;/g, '&amp;');
    argHtml = argHtml.replace(/&amp;lt;/g, '&lt;');
    argHtml = argHtml.replace(/&amp;gt;/g, '>');
    argHtml = argHtml.replace(/&amp;#39;/g, "'");
    argHtml = argHtml.replace(/&amp;quot;/g, '"');
    argHtml = argHtml.replace(/&amp;nbsp;/g, ' ');
    argHtml = argHtml.replace(/&lt;br>/g, '\n');
    return argHtml;
};
/**
 * 描述
 * @function
 * @description 数据中间加星号
 * @param {string|number} argData 要处理的数据
 * @param {number} argStart=3 前端显示多少位
 * @param {number} argEnd=4 后面显示多少位
 * @returns {string} 返回处理好的数据
 */
export const hideInfo = (argData = '', argStart = 3, argEnd = 4) => {
    argData = String(argData);
    let temLen = argData.length;
    let temSL = argData.length - argEnd - argStart;
    let start = '';
    if (temSL > 0) {
        for (let i = 0; i &lt; temSL; i++) {
            start += '*';
        }
        argData =
            argData.substring(0, argStart) +
                start +
                argData.substring(temLen - argEnd, temLen);
    }
    return argData;
};
/**
 * @function
 * @description 获取简单uuid
 * @returns {string} uuid
 */
export const getUuid = () => {
    function S4() {
        return (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);
    }
    return S4() + S4() + '-' + S4() + '-' + S4() + '-' + S4() + '-' + Date.now();
};
/**
 * @function
 * @description 获取随机数,含最大值，含最小值
 * @param  {number} min 最小值
 * @param  {number} max 最大值
 * @returns {number}
 */
export const randomInt = (min = 0, max = 100) => {
    min = Math.ceil(min);
    max = Math.floor(max);
    // 含最大值，含最小值
    return Math.floor(Math.random() * (max - min + 1)) + min;
};
/**
 * @function
 * @description 设置env参数，一般在main.js中调用
 * @param  {AnyObject} env 要设置的值
 */
export const setEnv = (env) => {
    ENV = env;
};
/**
 * @function
 * @description 获取env参数
 * @param  {string} key 要获取的值
 * @returns {string} 获取的值
 */
export const getEnv = (key) => {
    return safeData(ENV, key, '');
};
/**
 * @function
 * @description 设置日志输出logLevel 1 error 2 warn 3 info 4 debug
 * @param {AnyObject} logConfig 重写配置
 * @param {function} logConfig.error 错误日志回调（做额外处理用）
 */
export const setLog = (logConfig) => {
    // logLevel 1 error 2 warn 3 info 4 debug
    const logLevel = +getStorage('logLevel') || getEnv('VUE_APP_LOG_LEVEL');
    const logList = ['log', 'info', 'warn', 'error'];
    const log = {};
    logList.forEach((v) => {
        log[v] = console[v];
    });
    for (let key in logConfig) {
        if (console[key]) {
            ;
            console[key] = (...arg) => {
                ;
                log[key](...arg, Error().stack?.split('\n')[2]);
                // 回调处理
                logConfig[key] &amp;&amp; logConfig[key](...arg, Error().stack?.split('\n')[2]);
            };
        }
    }
    switch (logLevel) {
        case 1:
            console.warn = () => { };
        case 2:
            console.info = () => { };
        case 3:
            console.log = () => { };
        default:
            break;
    }
    // return log
};
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.10</a> on Wed Apr 20 2022 09:11:45 GMT+0000 (Coordinated Universal Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>



</body>
</html>
